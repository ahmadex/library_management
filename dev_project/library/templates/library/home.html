{% extends 'base.html'%}
{% load static %}
    
{% block content %}
    <div class="container">
        <div class="row" style='margin-top:120px;'>
            {% for book in books %}
                <div class="col-md-3">
                    <div class="ibox">
                        <div class="ibox-content product-box">
                            {% if book.cover_page%}
                            <div class="card-img-top">
                                <img src="{{book.cover_page.url}}"class="d-block ui-w-100">
                            </div>
                            {% endif %}
                            <div class="product-desc">
                                <span class="product-price">
                                {% if book.available_copy < 1 %}
                                   Unavailable
                                {% else %}
                                    Available
                                {% endif %}
                                </span>
                                <small class="text-muted">{{book.category}}</small>
                                <a href="{%url 'library:book_detail' book.id%}" class="product-name">{{book.title}}</a>
                                <div class="small m-t-xs">
                                    {{book.description|slice:40}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div> 
            {% endfor %}
        </div> 
    </div>

<div class='container'>
{% if books.has_other_pages %}
        <ul style='padding-left:40%' class="pagination">
            {% if books.has_previous %}
            <li style='margin-left:10px;'><a href="?page={{ books.previous_page_number }}"><button type="button" class="btn btn-primary">
            &laquo;</button> </a></li>
            {% else %}
            <li class="disabled">
            
            <button type="button" class="btn btn-danger">
            &laquo;</button></li>
            {% endif %}
            {% for i in books.paginator.page_range %}
            {% if books.number == i %}
                <li style='margin-left:10px;' class="active">
                <button type="button" class="btn btn-primary">
                <span>{{ i }} <span class="sr-only"></span></span></button>
                </li>
            {% else %}
                <li style='margin-left:10px;'><a href="?page={{ i }}">
                <button type="button" class="btn btn-primary">{{ i }}</button></a></li>
            {% endif %}
            {% endfor %}
            {% if books.has_next %}
            <li style='margin-left:10px;'><a href="?page={{ books.next_page_number }}">
            <button type="button" class="btn btn-primary">&raquo;</button></a></li>
            {% else %}
            <li style='margin-left:10px;' class="disabled"><button type="button" class="btn btn-danger">
            &raquo;</button></li></li>
            {% endif %}
        </ul>
    {% endif %}
</div>
    
{% endblock %}